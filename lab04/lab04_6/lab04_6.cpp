#include <iostream>
#include <cmath>

using namespace std;

// ******************************************************
// ** 1. การกำหนดค่าคงที่และการตั้งค่า (Configuration) **
// ******************************************************

// ค่าความเร็วพื้นฐานของมอเตอร์ (เช่น ค่า PWM สูงสุด 255)
const int MAX_SPEED = 200;

// จำนวนเซนเซอร์ตรวจจับเส้นที่ใช้ (ในตัวอย่างนี้ใช้ 5 ตัว)
const int NUM_SENSORS = 5;

// ******************************************************
// ** 2. ฟังก์ชันสมมติสำหรับการสื่อสารฮาร์ดแวร์ **
// ******************************************************

// ในโปรแกรมจริง ฟังก์ชันเหล่านี้จะเขียนขึ้นเพื่อสื่อสารกับขา GPIO 
// ของไมโครคอนโทรลเลอร์หรือบอร์ดคอมพิวเตอร์
// เราจะใช้ฟังก์ชันเหล่านี้เป็นตัวแทน (Placeholder) ในโค้ด C++ ทั่วไป

/**
 * @brief อ่านค่าอนาล็อก/ดิจิทัลจากเซนเซอร์ตรวจจับเส้น
 * @return อาร์เรย์ของค่าเซนเซอร์ (0.0 ถึง 1.0) หรือ (0/1)
 */
void ReadSensors(double sensorValues[NUM_SENSORS]) {
    // *** แทนที่ด้วยตรรกะการอ่านค่าเซนเซอร์จริงของคุณ ***
    // ในที่นี้ เราแค่ใส่ค่าสมมติสำหรับการทดสอบตรรกะ
    // สมมติว่า 0.0 คือ 'เจอเส้น' และ 1.0 คือ 'เจอพื้น'

    // ตัวอย่างสถานการณ์: รถเบนไปทางขวาเล็กน้อย (เซนเซอร์ซ้ายเจอเส้น)
    sensorValues[0] = 0.9; // ซ้ายสุด: เกือบเจอพื้น
    sensorValues[1] = 0.5; // ซ้ายกลาง: ก้ำกึ่ง
    sensorValues[2] = 0.1; // กลาง: เจอเส้น
    sensorValues[3] = 0.0; // ขวา: เจอเส้น
    sensorValues[4] = 0.0; // ขวาสุด: เจอเส้น
}

/**
 * @brief กำหนดความเร็วและทิศทางให้กับมอเตอร์
 * @param leftSpeed ความเร็วมอเตอร์ซ้าย (-MAX_SPEED ถึง MAX_SPEED)
 * @param rightSpeed ความเร็วมอเตอร์ขวา (-MAX_SPEED ถึง MAX_SPEED)
 */
void SetMotorSpeed(int leftSpeed, int rightSpeed) {
    // *** แทนที่ด้วยโค้ดควบคุม PWM/Motor Driver จริงของคุณ ***
    std::cout << "Motor Output: Left = " << leftSpeed
        << ", Right = " << rightSpeed << std::endl;
}

// ******************************************************
// ** 3. ตรรกะการควบคุมหลัก (Error Calculation and Control) **
// ******************************************************

// ** A. การคำนวณตำแหน่งผิดพลาด (Calculate Error) **
// ต